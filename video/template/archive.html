{% extends 'main.html' %}
{% load static %}

{% block javascript %}
{# videojs player #}
<link href="//vjs.zencdn.net/7.2/video-js.min.css" rel="stylesheet">
<script src="//vjs.zencdn.net/7.2/video.min.js"></script>


{# <link rel="stylesheet" href="http://glyphicons.com/css/style.css?v=10"> #}
<script src="{% static 'calendar.js' %}"></script>


<script>
{# load events #}
 var notikumi = [ {% for d in data %}
 { title: '{{ d.video_cam }}', start: '{{ d.video_date|date:"Y-m-d" }}', url: '{{ d.video_file.url }}' },{% endfor %} ];


function gaidas() {
  try {
    var vid = videojs("videoPlayer");
    var newSource = notikumi[notikumi.length - 31].url;
  }
  catch(err) {
    console.log( "Errors!" );
    console.log( err );
  }

  vid.src([ {type: "video/mp4", src: newSource} ]);
  console.log( newSource );
}

$(document).ready(function() {
  console.log("v2");
  gaidas();

 {# create calendar - must be fired after page load #}
  men_not();

 {# add event on video modal close to stop video playback #}
  $("#video_modal_close").click(function(e) {
    $("video").trigger("pause");
  });
});
</script>
{% endblock %}


{% block style %}
   .vjs-default-skin .vjs-volume-control { display: none; }
   .video-js .vjs-volume-menu-button { display:none; }
   .video-js.vjs-fullscreen .vjs-volume-menu-button { display:block; }
{% endblock %}


{% block content %}
{# {% if username.username %} #}
<div style="border: 1px solid white; margin: 0px;" id="playerContainer">
 <video id="videoPlayer" muted {#autoplay#} class="video-js vjs-default-skin" controls preload="auto" data-setup='{ "playbackRates": [0.25, 0.5, 1, 2, 4] }' width="640" height="360">
  <source id="source" src="/media/video/2019_43/20191101_s.mp4" type="video/mp4">
 </video>
</div>
<br>
{# {% endif %} #}


<div class="table-responsive">
  <h1 id="title" class="text-center"></h1>
  <span id="prev_poga" class="glyphicon glyphicon-backward" style="font-size:2em;cursor:pointer;opacity:0.5"></span>
  <span id="next_poga" class="glyphicon glyphicon-forward" style="font-size:2em;cursor:pointer;float:right;opacity:0.5"></span>
</div>

<div class="table-responsive" id="kalendars">
  <table class="table table-bordered table-responsive" style="background-color: #fff;" width="100%">
   <thead>
    <tr style="background-color:#666; color:#FFF"> <!-- #4286f4 -->
     <th style="font-size:1em; border:none" class="text-center">Pirmdiena</th>
     <th style="font-size:1em; border:none" class="text-center">Otrdiena</th>
     <th style="font-size:1em; border:none" class="text-center">Trešdiena</th>
     <th style="font-size:1em; border:none" class="text-center">Ceturtdiena</th>
     <th style="font-size:1em; border:none" class="text-center">Piektdiena</th>
     <th style="font-size:1em; border:none" class="text-center">Sestdiena</th>
     <th style="font-size:1em; border:none" class="text-center">Svētdiena</th>
    </tr>
   </thead>
   <tbody id="tab_bod"></tbody>
  </table>
</div>

{# <script src="{% static 'videojs-contrib-hls.min.js' %}"></script> #}
{% endblock %}

